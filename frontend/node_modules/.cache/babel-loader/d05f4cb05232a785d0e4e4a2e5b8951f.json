{"ast":null,"code":"var _jsxFileName = \"E:\\\\Ipedge\\\\frontend\\\\src\\\\components\\\\listEmployees.js\";\nimport React from 'react';\nimport store from '../store';\nimport { saveState } from '../store/localStorage';\n\nclass ListEmployees extends React.Component {\n  constructor(props) {\n    super(props);\n    this.handleLeavePage = this.handleLeavePage.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener('beforeunload', this.handleLeavePage);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener('beforeunload', this.handleLeavePage);\n  }\n\n  handleLeavePage(e) {\n    store.subscribe(() => {\n      const state = store.getState();\n      saveState(state);\n    });\n  }\n\n  render() {\n    let _this$props = this.props,\n        employees = _this$props.employees,\n        pageInfo = _this$props.pageInfo,\n        onChangePageSize = _this$props.onChangePageSize,\n        onChangeFilter = _this$props.onChangeFilter,\n        onDeleteEmployee = _this$props.onDeleteEmployee,\n        locationPathname = _this$props.locationPathname,\n        orderby = _this$props.orderby,\n        query = _this$props.query,\n        filters = _this$props.filters;\n    let employeeList = null;\n    let pageLink = [];\n    let pageSize = 5;\n    let pageNo = 1;\n    let totalPageNo = 1;\n    let orderbyStr = \"\";\n\n    if (orderby !== null) {\n      orderbyStr = \"&orderby=\" + orderby;\n    }\n\n    if (typeof pageInfo !== 'undefined' && Object.keys(pageInfo).length !== 0) {\n      pageNo = pageInfo.pageNo;\n      pageSize = pageInfo.pageSize;\n      totalPageNo = Math.ceil(pageInfo.count / pageSize);\n    }\n\n    let currentUrl = locationPathname + \"?pageSize=\" + pageSize + \"&pageNo=\" + pageNo;\n\n    if (!!employees && employees.length !== 0) {\n      employeeList = employees.map((employee, rowid) => React.createElement(\"tr\", {\n        key: employee.EmployeeID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 51\n        },\n        __self: this\n      }, React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 52\n        },\n        __self: this\n      }, rowid + 1 + (pageNo - 1) * pageSize), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, React.createElement(\"a\", {\n        href: './employee/' + employee.EmployeeID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 53\n        },\n        __self: this\n      }, employee.FirstName, \" \", employee.LastName)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 56\n        },\n        __self: this\n      }, employee.EmployeeNumber), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 57\n        },\n        __self: this\n      }, employee.DateJoined.substr(0, 10)), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 58\n        },\n        __self: this\n      }, employee.Extension), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 59\n        },\n        __self: this\n      }, employee[\"Role.RoleName\"] !== null ? employee[\"Role.RoleName\"] : null), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        action: './changeEmployee/' + employee.EmployeeID,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 60\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 61\n        },\n        __self: this\n      }, \"Change \"))), React.createElement(\"td\", {\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, React.createElement(\"button\", {\n        onClick: () => {\n          var answer = window.confirm(\"Delete Record?\");\n\n          if (answer) {\n            return onDeleteEmployee(employee.EmployeeID, pageSize, pageNo);\n          }\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 64\n        },\n        __self: this\n      }, \"Delete\")))); //console.log(\"pageSize:\" + pageSize);\n      //console.log(\"totalPageNo:\" + totalPageNo);\n\n      for (let i = 0; i < totalPageNo; i++) {\n        pageLink.push(React.createElement(\"td\", {\n          key: i,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 80\n          },\n          __self: this\n        }, React.createElement(\"a\", {\n          href: './employees?pageSize=' + pageSize + '&pageNo=' + (i + 1) + orderbyStr,\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 81\n          },\n          __self: this\n        }, \" \", i + 1, \" \")));\n      } //console.log(\"totalPageNo:\" + totalPageNo);\n      //console.log(\"pageLink:\" + pageLink);\n\n    }\n\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(\"thead\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      key: \"header\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Row No.\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: currentUrl + \"&orderby=employeeName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, \"Employee Name\")), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: currentUrl + \"&orderby=EmployeeNumber\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Employee Number\")), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: currentUrl + \"&orderby=DateJoined\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }, \"Date Joined\")), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: currentUrl + \"&orderby=Extension\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Extension\")), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, React.createElement(\"a\", {\n      href: currentUrl + \"&orderby=RoleName\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }, \"Role Name\")), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 99\n      },\n      __self: this\n    }, \"Change\"), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, \"Delete\")), React.createElement(\"tr\", {\n      key: \"filter\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 102\n      },\n      __self: this\n    }, React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      defaultValue: !!filters.employeeName ? filters.employeeName : \"Filter...\",\n      onFocus: e => e.target.value === \"Filter...\" ? e.target.value = '' : null,\n      onBlur: e => onChangeFilter(query, filters, \"employeeName\", e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      defaultValue: \"Filter...\",\n      onFocus: e => e.target.value === \"Filter...\" ? e.target.value = '' : null,\n      onBlur: e => onChangeFilter(query, filters, \"EmployeeNumber\", e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 107\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      defaultValue: \"Filter...\",\n      onFocus: e => e.target.value === \"Filter...\" ? e.target.value = '' : null,\n      onBlur: e => onChangeFilter(query, filters, \"DateJoined\", e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 109\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      defaultValue: \"Filter...\",\n      onFocus: e => e.target.value === \"Filter...\" ? e.target.value = '' : null,\n      onBlur: e => onChangeFilter(query, filters, \"Extension\", e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 111\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      defaultValue: \"Filter...\",\n      onFocus: e => e.target.value === \"Filter...\" ? e.target.value = '' : null,\n      onBlur: e => onChangeFilter(query, filters, \"RoleName\", e.target.value),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 113\n      },\n      __self: this\n    })), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115\n      },\n      __self: this\n    }), React.createElement(\"th\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116\n      },\n      __self: this\n    }))), React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 119\n      },\n      __self: this\n    }, employeeList)), React.createElement(\"table\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123\n      },\n      __self: this\n    }, React.createElement(\"tbody\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 124\n      },\n      __self: this\n    }, React.createElement(\"tr\", {\n      key: \"pages\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 125\n      },\n      __self: this\n    }, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126\n      },\n      __self: this\n    }, \"Pages:\"), pageLink, React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 128\n      },\n      __self: this\n    }, \"\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\\xA0\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 129\n      },\n      __self: this\n    }, \"Page Size:\"), React.createElement(\"td\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }, React.createElement(\"input\", {\n      size: \"2\",\n      type: \"text\",\n      id: \"inputPageSize\",\n      onChange: e => onChangePageSize(e.target.value, pageNo),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 130\n      },\n      __self: this\n    }))))));\n  }\n\n}\n\nexport { ListEmployees };","map":{"version":3,"sources":["E:\\Ipedge\\frontend\\src\\components\\listEmployees.js"],"names":["React","store","saveState","ListEmployees","Component","constructor","props","handleLeavePage","bind","componentDidMount","window","addEventListener","componentWillUnmount","removeEventListener","e","subscribe","state","getState","render","employees","pageInfo","onChangePageSize","onChangeFilter","onDeleteEmployee","locationPathname","orderby","query","filters","employeeList","pageLink","pageSize","pageNo","totalPageNo","orderbyStr","Object","keys","length","Math","ceil","count","currentUrl","map","employee","rowid","EmployeeID","FirstName","LastName","EmployeeNumber","DateJoined","substr","Extension","answer","confirm","i","push","employeeName","target","value"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport store from '../store'\r\nimport { saveState } from '../store/localStorage'\r\n\r\nclass ListEmployees extends React.Component {\r\n\r\n    constructor(props) {\r\n        super(props);\r\n        this.handleLeavePage = this.handleLeavePage.bind(this);\r\n    }\r\n\r\n    componentDidMount() {\r\n        window.addEventListener('beforeunload', this.handleLeavePage);\r\n    }\r\n\r\n    componentWillUnmount() {\r\n        window.removeEventListener('beforeunload', this.handleLeavePage);\r\n    }\r\n\r\n    handleLeavePage(e) {\r\n        store.subscribe(() => {\r\n            const state = store.getState();\r\n            saveState(state);\r\n        })\r\n    }\r\n\r\n    render() {\r\n        let { employees, pageInfo, onChangePageSize, onChangeFilter, onDeleteEmployee, locationPathname, orderby, query, filters } = this.props;\r\n        let employeeList = null;\r\n\r\n        let pageLink = [];\r\n        let pageSize = 5;\r\n        let pageNo = 1;\r\n        let totalPageNo = 1;\r\n        let orderbyStr = \"\"\r\n\r\n\r\n        if (orderby !== null) {\r\n            orderbyStr = \"&orderby=\" + orderby;\r\n        }\r\n\r\n        if (typeof pageInfo !== 'undefined' && Object.keys(pageInfo).length !== 0) {\r\n            pageNo = pageInfo.pageNo\r\n            pageSize = pageInfo.pageSize\r\n            totalPageNo = Math.ceil(pageInfo.count / pageSize);\r\n        }\r\n\r\n        let currentUrl = locationPathname + \"?pageSize=\" + pageSize + \"&pageNo=\" + pageNo;\r\n        if (!!employees && employees.length !== 0) {\r\n            employeeList = employees.map((employee, rowid) => (\r\n                <tr key={employee.EmployeeID}>\r\n                    <td>{(rowid + 1 + (pageNo - 1) * pageSize)}</td>\r\n                    <td><a href={'./employee/' + employee.EmployeeID}>\r\n                        {employee.FirstName} {employee.LastName}</a>\r\n                    </td>\r\n                    <td>{employee.EmployeeNumber}</td>\r\n                    <td>{employee.DateJoined.substr(0, 10)}</td>\r\n                    <td>{employee.Extension}</td>\r\n                    <td>{employee[\"Role.RoleName\"] !== null ? employee[\"Role.RoleName\"] : null}</td>\r\n                    <td><form action={'./changeEmployee/' + employee.EmployeeID}>\r\n                        <button>Change </button>\r\n                    </form>\r\n                    </td>\r\n                    <td><button onClick={() => {\r\n                        var answer = window.confirm(\"Delete Record?\");\r\n                        if (answer) {\r\n                            return onDeleteEmployee(\r\n                                employee.EmployeeID,\r\n                                pageSize,\r\n                                pageNo\r\n                            )\r\n                        }\r\n                    }}>Delete</button></td>\r\n                </tr>\r\n            ));\r\n            //console.log(\"pageSize:\" + pageSize);\r\n            //console.log(\"totalPageNo:\" + totalPageNo);\r\n            for (let i = 0; i < totalPageNo; i++) {\r\n                pageLink.push(\r\n                    <td key={i}>\r\n                        <a href={'./employees?pageSize=' + pageSize + '&pageNo=' + (i + 1) + orderbyStr}> {i + 1} </a>\r\n                    </td>\r\n                );\r\n            }\r\n            //console.log(\"totalPageNo:\" + totalPageNo);\r\n            //console.log(\"pageLink:\" + pageLink);\r\n        }\r\n        return (\r\n            <div>\r\n                <table>\r\n                    <thead>\r\n                        <tr key=\"header\">\r\n                            <th>Row No.</th>\r\n                            <th><a href={currentUrl + \"&orderby=employeeName\"}>Employee Name</a></th>\r\n                            <th><a href={currentUrl + \"&orderby=EmployeeNumber\"}>Employee Number</a></th>\r\n                            <th><a href={currentUrl + \"&orderby=DateJoined\"}>Date Joined</a></th>\r\n                            <th><a href={currentUrl + \"&orderby=Extension\"}>Extension</a></th>\r\n                            <th><a href={currentUrl + \"&orderby=RoleName\"}>Role Name</a></th>\r\n                            <th>Change</th>\r\n                            <th>Delete</th>\r\n                        </tr>\r\n                        <tr key=\"filter\">\r\n                            <th></th>\r\n                            <th><input defaultValue={!!filters.employeeName?filters.employeeName:\"Filter...\"} \r\n                                onFocus={e => e.target.value === \"Filter...\" ? e.target.value = '' : null}\r\n                                onBlur={e => onChangeFilter(query, filters, \"employeeName\", e.target.value)}></input></th>\r\n                            <th><input defaultValue=\"Filter...\" onFocus={e => e.target.value === \"Filter...\" ? e.target.value = '' : null}\r\n                                onBlur={e => onChangeFilter(query, filters, \"EmployeeNumber\", e.target.value)}></input></th>\r\n                            <th><input defaultValue=\"Filter...\" onFocus={e => e.target.value === \"Filter...\" ? e.target.value = '' : null}\r\n                                onBlur={e => onChangeFilter(query, filters, \"DateJoined\", e.target.value)}></input></th>\r\n                            <th><input defaultValue=\"Filter...\" onFocus={e => e.target.value === \"Filter...\" ? e.target.value = '' : null}\r\n                                onBlur={e => onChangeFilter(query, filters, \"Extension\", e.target.value)}></input></th>\r\n                            <th><input defaultValue=\"Filter...\" onFocus={e => e.target.value === \"Filter...\" ? e.target.value = '' : null}\r\n                                onBlur={e => onChangeFilter(query, filters, \"RoleName\", e.target.value)}></input></th>\r\n                            <th></th>\r\n                            <th></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        {employeeList}\r\n                    </tbody>\r\n                </table>\r\n                <table>\r\n                    <tbody>\r\n                        <tr key=\"pages\">\r\n                            <td>Pages:</td>\r\n                            {pageLink}\r\n                            <td>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</td>\r\n                            <td>Page Size:</td>\r\n                            <td><input size=\"2\" type=\"text\" id=\"inputPageSize\" onChange={(e) => onChangePageSize(e.target.value, pageNo)}></input></td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport { ListEmployees }"]},"metadata":{},"sourceType":"module"}