{"ast":null,"code":"import _objectSpread from \"E:\\\\projects\\\\redux_demo2\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread\";\nimport actionTypes from '../actionTypes';\nconst initialState = {\n  userInfo: {}\n};\n\nconst countryList = data => {\n  var lookup = {};\n  var items = data;\n  var result = [];\n\n  for (var item, i = 0; item = items[i++];) {\n    var country = item.address.country;\n\n    if (!(country in lookup)) {\n      lookup[country] = 1;\n      result.push(country);\n    }\n  }\n\n  return result;\n};\n\nconst cityList = data => {\n  var lookup = {};\n  var items = data;\n  var result = [];\n\n  for (var item, i = 0; item = items[i++];) {\n    var city = item.address.city;\n\n    if (!(city in lookup)) {\n      lookup[city] = 1;\n      result.push(city);\n    }\n  }\n\n  return result;\n};\n\nconst dataReducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.FEATCH_USER_OK:\n      return _objectSpread({}, state, {\n        userInfo: action.user\n      });\n\n    case actionTypes.FEATCH_DATA_OK:\n      let countries1 = countryList(action.data);\n      let cities1 = cityList(action.data);\n      return _objectSpread({}, state, {\n        data: action.data,\n        countries: countries1,\n        cities: cities1\n      });\n\n    case actionTypes.CLICK_COUNTRY:\n      let filters1 = state.filters;\n      let countries = [];\n\n      if (typeof filters1.countries != undefined) {\n        countries = filters1.countries;\n      }\n\n      console.log(countries);\n      let country = action.value;\n      let pos1 = countries.indexOf(country);\n      console.log(country);\n\n      if (pos1 < 0) {\n        countries.push(country);\n      } else {\n        countries.splice(pos1, 1);\n      }\n\n      filters1 = _objectSpread({}, filters1, {\n        countries: countries\n      });\n      return _objectSpread({}, state, {\n        filters: filters1\n      });\n\n    case actionTypes.CLICK_CITY:\n      let filters2 = state.filters;\n      let cities = filters2.cities;\n\n      if (!cities) {\n        cities = [];\n      }\n\n      let city = action.value;\n      let pos2 = cities.indexOf(city);\n\n      if (pos2 < 0) {\n        cities.push(city);\n      } else {\n        cities.splice(pos2, 1);\n      }\n\n      filters2 = _objectSpread({}, filters2, {\n        cities: cities\n      });\n      return _objectSpread({}, state, {\n        filters: filters2\n      });\n\n    default:\n      return state;\n  }\n};\n\nexport default dataReducer;","map":{"version":3,"sources":["E:\\projects\\redux_demo2\\src\\reducers\\dataReducer.js"],"names":["actionTypes","initialState","userInfo","countryList","data","lookup","items","result","item","i","country","address","push","cityList","city","dataReducer","state","action","type","FEATCH_USER_OK","user","FEATCH_DATA_OK","countries1","cities1","countries","cities","CLICK_COUNTRY","filters1","filters","undefined","console","log","value","pos1","indexOf","splice","CLICK_CITY","filters2","pos2"],"mappings":"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","sourcesContent":["import actionTypes from '../actionTypes'\r\n\r\nconst initialState = {\r\n    userInfo: {}\r\n}\r\n\r\nconst countryList = (data) => {\r\n    var lookup = {};\r\n    var items = data;\r\n    var result = [];\r\n\r\n    for (var item, i = 0; item = items[i++];) {\r\n        var country = item.address.country;\r\n\r\n        if (!(country in lookup)) {\r\n            lookup[country] = 1;\r\n            result.push(country);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nconst cityList = (data) => {\r\n    var lookup = {};\r\n    var items = data;\r\n    var result = [];\r\n\r\n    for (var item, i = 0; item = items[i++];) {\r\n        var city = item.address.city;\r\n\r\n        if (!(city in lookup)) {\r\n            lookup[city] = 1;\r\n            result.push(city);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\nconst dataReducer = (state = initialState, action) => {\r\n    switch (action.type) {\r\n        case actionTypes.FEATCH_USER_OK:\r\n            return { ...state, userInfo: action.user };\r\n        case actionTypes.FEATCH_DATA_OK:\r\n            let countries1 = countryList(action.data)\r\n            let cities1 = cityList(action.data)\r\n            return { ...state, data: action.data, countries: countries1, cities: cities1 };\r\n        case actionTypes.CLICK_COUNTRY:\r\n            let filters1 = state.filters;\r\n           \r\n            let countries = [];\r\n            if (typeof filters1.countries != undefined) {\r\n                countries = filters1.countries;\r\n            }\r\n            console.log(countries);\r\n            let country = action.value;\r\n            let pos1 = countries.indexOf(country);\r\n            console.log(country)\r\n            if (pos1 < 0) {\r\n                countries.push(country)\r\n            } else {\r\n                countries.splice(pos1, 1)\r\n            }\r\n            filters1 = { ...filters1, countries: countries }\r\n            return { ...state, filters: filters1 };\r\n\r\n        case actionTypes.CLICK_CITY:\r\n            let filters2 = state.filters;\r\n            let cities = filters2.cities;\r\n            if (!cities) {\r\n                cities = []\r\n            }\r\n            let city = action.value;\r\n            let pos2 = cities.indexOf(city);\r\n            if (pos2 < 0) {\r\n                cities.push(city)\r\n            } else {\r\n                cities.splice(pos2, 1)\r\n            }\r\n            filters2 = { ...filters2, cities: cities }\r\n            return { ...state, filters: filters2 };\r\n        default:\r\n            return state;\r\n    }\r\n}\r\n\r\nexport default dataReducer;"]},"metadata":{},"sourceType":"module"}